generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Ptinfo {
  ptnumber  Int        @unique
  ptname    String
  ptage     Int
  bith      DateTime?
  sex       String
  id        Int        @id @default(autoincrement())
  reports   Report[]   @relation("PtinfoReports")
  schedules Schedule[] @relation("PtinfoSchedules")
}

model Report {
  examdate     DateTime
  ptnumber     Int
  modality     String
  docor        String  // ここをStringに変更し、リレーションを削除
  department   String
  clinicaldiag String
  imagediag    String
  report       String
  finaldiag    String
  interesting  String
  inputby      String
  inputdate    DateTime
  site         String
  inputtime    DateTime
  id           Int      @id @default(autoincrement())
  examdetail   String
  dicomid      Int
  pspnumber    String
  ptinfo       Ptinfo   @relation("PtinfoReports", fields: [ptnumber], references: [ptnumber])
}

model Doctor {
  docname    String
  department String
  password   String
  hospital   String
  level      Int
  docid      Int      @id @default(autoincrement())
  // reports    Report[] @relation("ReportDoctor") // リレーションを削除
}

model Schedule {
  ptid       Int
  id         Int      @id @default(autoincrement())
  examdate   DateTime
  examtime   DateTime
  department String
  doctor     String
  ivrname    String
  memo       String
  inputter   String
  ptinfo     Ptinfo   @relation("PtinfoSchedules", fields: [ptid], references: [ptnumber])
}